// utils/shareUtils.ts

interface AgentSummary {
  name: string;
  opening: number;
  received: number;
  paid: number;
  commission: number;
  cancelled: number;
  closing: number;
}

export const shareAgentSummaryOnWhatsApp = (agent: AgentSummary): void => {
  // Format the date
  const today = new Date().toLocaleDateString('en-IN', {
    day: '2-digit',
    month: 'short',
    year: 'numeric'
  });

  // Create the message with proper Unicode emojis
  const message = `*Daily Summary - ${agent.name}*
üìÖ Date: ${today}

üíº *Opening Balance:* ‚Çπ${agent.opening.toLocaleString()}
üì• *Token Received:* ‚Çπ${agent.received.toLocaleString()}
üí∞ *Commission:* ‚Çπ${agent.commission.toLocaleString()}
üì§ *Deposit Made:* ‚Çπ${agent.paid.toLocaleString()}
${agent.cancelled > 0 ? `‚ùå *Cancelled:* ‚Çπ${agent.cancelled.toLocaleString()}\n` : ''}
üèÅ *Closing Balance:* ‚Çπ${agent.closing.toLocaleString()}

_Generated by Cash Flow Desk App_`;

  // Encode the message for URL
  const encodedMessage = encodeURIComponent(message);
  
  // Create WhatsApp URL (works on both mobile and desktop)
  const whatsappUrl = `https://wa.me/?text=${encodedMessage}`;
  
  // Open WhatsApp
  window.open(whatsappUrl, '_blank');
};